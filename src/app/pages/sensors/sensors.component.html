<app-navbar></app-navbar>
<div class="m-0 p-0 row d-flex" [ngClass]="{'rev': this.width<965, '': this.width>=965}">

	<div class="cc2 cont me-0" [ngClass]="{'c100': this.show_3==true || this.width<965, 'c10': this.show_3==false}">
		<div class="p-3 pb-0 pe-2">
				<div class="row d-flex">
					<div class="col-6 col-sm-6 col-lg-2 mb-3">
						<div class="w-100 d-flex" style="position: relative;">
							<input (keyup)="textSearch($event)" type="text" [(ngModel)]="search.value" class="form-control" placeholder="{{ 'sensors.buscar_sensores' | translate }}" aria-label="Recipient's username" aria-describedby="basic-addon2" readonly *ngIf="edit_change || new_change">
							<input (keyup)="textSearch($event)" type="text" [(ngModel)]="search.value" class="form-control" placeholder="{{ 'sensors.buscar_sensores' | translate }}" aria-label="Recipient's username" aria-describedby="basic-addon2" *ngIf="!edit_change && !new_change">
							<p style="cursor: pointer; position: absolute; top: 7px; right: 7px;" class="" type="" (click)="deleteSearch()" class="btn-close" aria-label="Close"></p>
						</div>
					</div>
				<div class="col-6 col-sm-6 col-lg-10 d-flex " style="justify-content: flex-end;">
					<div>
						<button type="button" class="btn btn-info" (click)="openNew()" [ngClass]="{'disabled': edit_change || new_change}">{{ 'sensors.nuevo_sensor' | translate }}</button>
					</div>
				</div>
			</div>	
		</div>

		<div class="row flex-row-reverse pe-3" style="height: 76vh;">
			<div *ngIf="charging" class="col-12 pe-0 over d-flex" style="justify-content: center; align-content: center;align-items: center; max-height: 77vh;"> 
				<div class="spinner-border text-secondary" role="status">
					<span class="visually-hidden">{{ 'loading' | translate }}</span>
				</div>
			</div>
			<div *ngIf="data!=null && data.length<=0" class="col-12 pe-0 over d-flex" style="justify-content: center; align-content: center;align-items: center; max-height: 77vh;"> 
				<div style="height: min-content;">
				  <p style="font-size: x-large;">{{ 'no_sensors' | translate }}</p>
				</div>
			</div>
			<div *ngIf="data!=null && data.length>0" class="col-12 pe-0 over" style="max-height: 77vh;"> 
				<table class="table table-hover">
					<thead>
						<tr>
							<th scope="col" style="cursor: pointer;" [ngClass]="{'mark': mark == 'orden'}">
								<svg *ngIf="alt_1_a" (click)="alt_1_a=false;getSensors('orden','ASC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
									<path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
								</svg>
								<svg *ngIf="!alt_1_a" (click)="alt_1_a=true;getSensors('orden','DESC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
									<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
								</svg>
								{{ 'sensors.order' | translate }}</th>
							<th scope="col" style="cursor: pointer;" [ngClass]="{'mark': mark == 'type'}">
								<svg *ngIf="alt_2_a" (click)="alt_2_a=false;getSensors('type','ASC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
									<path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
								  </svg>
								  <svg *ngIf="!alt_2_a" (click)="alt_2_a=true;getSensors('type','DESC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
									<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
								  </svg>
								{{ 'sensors.type' | translate }}</th>
							<th scope="col" style="cursor: pointer;" [ngClass]="{'mark': mark == 'metric'}">
								<svg *ngIf="alt_3_a" (click)="alt_3_a=false;getSensors('metric','ASC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
									<path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
								  </svg>
								  <svg *ngIf="!alt_3_a" (click)="alt_3_a=true;getSensors('metric','DESC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
									<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
								  </svg>
								{{ 'sensors.metric' | translate }}</th>
							<th class="d-none d-md-none d-lg-block" scope="col" style="cursor: pointer;" [ngClass]="{'mark': mark == 'description'}">
								<svg *ngIf="alt_4_a" (click)="alt_4_a=false;getSensors('description','ASC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
									<path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
								  </svg>
								  <svg *ngIf="!alt_4_a" (click)="alt_4_a=true;getSensors('description','DESC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
									<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
								  </svg>
								{{ 'sensors.description' | translate }}</th>

							<th *ngIf="show==false && show_2==false" scope="col"style="cursor: pointer; text-align: center;" [ngClass]="{'mark': mark == 'valuemin'}">
								<svg *ngIf="alt_6_a" (click)="alt_6_a=false;getSensors('valuemin','ASC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
									<path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
								  </svg>
								  <svg *ngIf="!alt_6_a" (click)="alt_6_a=true;getSensors('valuemin','DESC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
									<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
								  </svg>
								  {{ 'sensors.general' | translate }}</th>
							<th *ngIf="show==false && show_2==false" style="cursor: pointer;" scope="col" [ngClass]="{'mark': mark == 'valuemax'}">
								<svg *ngIf="alt_7_a" (click)="alt_7_a=false;getSensors('correction_general','ASC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
									<path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
								  </svg>
								  <svg *ngIf="!alt_7_a" (click)="alt_7_a=true;getSensors('correction_time_general','DESC')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
									<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
								  </svg>
								  {{ 'sensors.time_general' | translate }}</th>							
							
							<th scope="col" style="text-align: center;">{{ 'sensors.duplicate' | translate }}</th>
							<th scope="col" style="text-align: center;">{{ 'sensors.edit' | translate }}</th>
						</tr>
					</thead>
					<tbody *ngFor="let quote of data; let i = index">
						<tr style="cursor: pointer;" [ngClass]="{'disabled': edit_change || new_change }">
							<th (click)="orderColumn(quote.id)">{{ quote.orden }}</th>

							<td (click)="orderColumn(quote.id)">{{ quote.type }}</td>
							<td (click)="orderColumn(quote.id)">{{ quote.metric }}</td>
							<td class="d-none d-md-none d-lg-block" (click)="orderColumn(quote.id)">{{ quote.description }}</td>
		
							<td *ngIf="show==false && show_2==false" (click)="orderColumn(quote.id)">{{ quote.correction_general }}</td>
							<td *ngIf="show==false && show_2==false" (click)="orderColumn(quote.id)">{{ quote.correction_time_general }}</td>

							<td (mouseout)="view_dup= 1000" (mouseover)="view_dup= i" style="text-align: center;" (click)="duplicateSensor(quote.id,quote.type)">                      
							<svg *ngIf="view_dup!=i" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-clipboard-plus" viewBox="0 0 16 16">
								<path fill-rule="evenodd" d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7z"/>
								<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
								<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
							</svg>
							<svg *ngIf="view_dup==i" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-clipboard2-plus-fill" viewBox="0 0 16 16">
								<path d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5Z"/>
								<path d="M4.085 1H3.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1h-.585c.055.156.085.325.085.5V2a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 4 2v-.5c0-.175.03-.344.085-.5ZM8.5 6.5V8H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V9H6a.5.5 0 0 1 0-1h1.5V6.5a.5.5 0 0 1 1 0Z"/>
							  </svg>
							</td>
							<td (mouseover)="pencil_dup= i" (mouseout)="pencil_dup= 1000" (click)="orderColumn(quote.id)" style="color: black; text-align: center;">
								<svg *ngIf="pencil_dup!=i"  xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
									<path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
								</svg>
								<svg *ngIf="pencil_dup==i"  xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
									<path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
								</svg>
							</td>
						</tr>	
					</tbody>
				</table>
			</div>		
		</div> 
	</div>

	<div class="cc2 cont" *ngIf="show" [ngClass]="{'sensores_2_100': this.width<965, 'sensores_2_20': this.width>=965}">
		<form #form="ngForm" class="row needs-validation p-3"> 
			<div class="col-12">
				<div class="row">
					
					<div class="col-12">
						<h1 *ngIf="dup">Duplicar {{sensors_new.type}}</h1>
						<h1 *ngIf="!dup">{{ 'sensors.nuevo_sensor' | translate }}</h1>
					</div>

					<div class="col-12 pt-3 form-group">
						<label for="type">{{ 'sensors.type' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.type }}" type="text" id="type" class="form-control" name="type" [(ngModel)]="sensors_new['type']" required type>
						<div *ngIf="form.submitted && form.controls['type'].errors" class="text-danger">
							<div *ngIf="form.controls['type'].errors['required']">{{ 'sensors.type' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-12 mt-2">
						<label for="metric">{{ 'sensors.metric' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.metric }}" type="text" id="metric" class="form-control" name="metric" [(ngModel)]="sensors_new['metric']" required type>
						<div *ngIf="form.submitted && form.controls['metric'].errors" class="text-danger">
							<div *ngIf="form.controls['metric'].errors['required']">{{ 'sensors.metric' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-12 mt-2">
						<label for="description">{{ 'sensors.description' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.description }}" type="text" id="description" class="form-control" name="description" [(ngModel)]="sensors_new['description']" type>
						<div *ngIf="form.submitted && form.controls['description'].errors" class="text-danger">
							<div *ngIf="form.controls['description'].errors['required']">{{ 'sensors.description' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-12 mt-2">
						<label for="orden">{{ 'sensors.order' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.orden }}" type="text" id="orden" class="form-control" name="orden" [(ngModel)]="sensors_new['orden']" type>
						<div *ngIf="form.submitted && form.controls['orden'].errors" class="text-danger">
							<div *ngIf="form.controls['orden'].errors['required']">{{ 'sensors.order' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-12 mt-5">
						<label for="errorvalue">{{ 'sensors.error_value' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.errorvalue }}" type="text" id="errorvalue" class="form-control" name="errorvalue" [(ngModel)]="sensors_new['errorvalue']" type>
						<div *ngIf="form.submitted && form.controls['errorvalue'].errors" class="text-danger">
							<div *ngIf="form.controls['errorvalue'].errors['required']">{{ 'sensors.error_value' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="valuemin">{{ 'sensors.value_min' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.valuemin }}" type="text" id="valuemin" class="form-control" name="valuemin" [(ngModel)]="sensors_new['valuemin']" type>
						<div *ngIf="form.submitted && form.controls['valuemin'].errors" class="text-danger">
							<div *ngIf="form.controls['valuemin'].errors['required']">{{ 'sensors.value_min' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="valuemax">{{ 'sensors.value_max' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.valuemax }}" type="text" id="valuemax" class="form-control" name="valuemax" [(ngModel)]="sensors_new['valuemax']" type>
						<div *ngIf="form.submitted && form.controls['valuemax'].errors" class="text-danger">
							<div *ngIf="form.controls['valuemax'].errors['required']">{{ 'sensors.value_max' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="general">{{ 'sensors.general' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.correction_general }}" type="text" id="general" class="form-control" name="general" [(ngModel)]="sensors_new['correction_general']" type>
						<div *ngIf="form.submitted && form.controls['general'].errors" class="text-danger">
							<div *ngIf="form.controls['general'].errors['required']">{{ 'sensors.general' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="time_general">{{ 'sensors.time_general' | translate }}</label>
						<input (ngModelChange)="edit_change=true" value="{{ sensors_new.correction_time_general }}" type="text" id="time_general" class="form-control" name="time_general" [(ngModel)]="sensors_new['correction_time_general']" type>
						<div *ngIf="form.submitted && form.controls['time_general'].errors" class="text-danger">
							<div *ngIf="form.controls['time_general'].errors['required']">{{ 'sensors.time_general' | translate }} is required.</div>
						</div>
					</div>

				</div>
			</div>

			<div class="col-12 mt-5">
				<div class="row">
					<div class="col-6 mt-3">
						<button *ngIf="edit_change==false" type="button navb" class="btn btn-secondary text-light navb" (click)="clouseAll()" style="width: 100%">{{ 'sensors.cancel' | translate }}</button>
						<button *ngIf="edit_change==true" type="button navb" class="btn btn-secondary text-light navb" style="width: 100%" data-bs-toggle="modal" data-bs-target="#exampleModal1">{{ 'sensors.cancel' | translate }}</button>
					</div>
					<div class="col-6 mt-3">
						<button (click)="newSensor(form)" ng-click="ocultar = true" type="button navb submit" class="btn btn-info navb me-3" style="width: 100%" [ngClass]="{'disabled': !edit_change}">{{ 'sensors.save' | translate }}</button>
					</div>	
				</div>
			</div>
		</form>
	</div>

	<div class="cc2 cont" *ngIf="show_2" [ngClass]="{'sensores_2_100': this.width<965, 'sensores_2_20': this.width>=965}">
		<form #form="ngForm" name='myForm' class="row needs-validation p-3"> 
			<div class="col-12">
				<div class="row">

					<div class="col-12">
						<h1>{{ 'sensors.of' | translate }} {{ sensors.type }}</h1>
					</div>
					<input ng-class="myForm.input.$valid ? '' : 'has-danger'" (ngModelChange)="new_change=true"  type="text" class="form-control d-none" #campo="ngModel" id="type" name="type" value="{{ sensors.type }}" [(ngModel)]="sensors.id">
					
					<div class="col-12 pt-3">
						<div class="form-group">
							<label for="type">{{ 'sensors.type' | translate }}</label>
							<input (ngModelChange)="new_change=true" value="{{ sensors.type }}" type="text" id="type" class="form-control" name="type" [(ngModel)]="sensors['type']" required type>
							<div *ngIf="form.submitted && form.controls['type'].errors" class="text-danger">
							  <div *ngIf="form.controls['type'].errors['required']">{{ 'sensors.type' | translate }} is required.</div>
							</div>
						</div>			
					</div>

					<div class="col-12 mt-2">
						<div class="form-group">
							<label for="metric">{{ 'sensors.metric' | translate }}</label>
							<input (ngModelChange)="new_change=true" value="{{ sensors.metric }}" type="text" id="metric" class="form-control" name="metric" [(ngModel)]="sensors['metric']" required type>
							<div *ngIf="form.submitted && form.controls['metric'].errors" class="text-danger">
							  <div *ngIf="form.controls['metric'].errors['required']">{{ 'sensors.metric' | translate }} is required.</div>
							</div>
						</div>		
					</div>

					<div class="col-md-12 mt-2">
						<label for="description">{{ 'sensors.description' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors.description }}" type="text" id="description" class="form-control" name="description" [(ngModel)]="sensors['description']" type>
						<div *ngIf="form.submitted && form.controls['description'].errors" class="text-danger">
							<div *ngIf="form.controls['description'].errors['required']">{{ 'sensors.description' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-12 mt-2">
						<label for="orden">{{ 'sensors.order' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors_new.orden }}" type="text" id="orden" class="form-control" name="orden" [(ngModel)]="sensors['orden']" type>
						<div *ngIf="form.submitted && form.controls['orden'].errors" class="text-danger">
							<div *ngIf="form.controls['orden'].errors['required']">{{ 'sensors.order' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-12 mt-5">
						<label for="errorvalue">{{ 'sensors.error_value' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors.errorvalue }}" type="text" id="errorvalue" class="form-control" name="errorvalue" [(ngModel)]="sensors['errorvalue']" type>
						<div *ngIf="form.submitted && form.controls['errorvalue'].errors" class="text-danger">
							<div *ngIf="form.controls['errorvalue'].errors['required']">{{ 'sensors.error_value' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="valuemin">{{ 'sensors.value_min' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors.valuemin }}" type="text" id="valuemin" class="form-control" name="valuemin" [(ngModel)]="sensors['valuemin']" type>
						<div *ngIf="form.submitted && form.controls['valuemin'].errors" class="text-danger">
							<div *ngIf="form.controls['valuemin'].errors['required']">{{ 'sensors.value_min' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="valuemax">{{ 'sensors.value_max' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors.valuemax }}" type="text" id="valuemax" class="form-control" name="valuemax" [(ngModel)]="sensors['valuemax']" type>
						<div *ngIf="form.submitted && form.controls['valuemax'].errors" class="text-danger">
							<div *ngIf="form.controls['valuemax'].errors['required']">{{ 'sensors.value_max' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="general">{{ 'sensors.general' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors.correction_general }}" type="text" id="general" class="form-control" name="general" [(ngModel)]="sensors['correction_general']" type>
						<div *ngIf="form.submitted && form.controls['general'].errors" class="text-danger">
							<div *ngIf="form.controls['general'].errors['required']">{{ 'sensors.general' | translate }} is required.</div>
						</div>
					</div>

					<div class="col-md-6 mt-2">
						<label for="time_general">{{ 'sensors.time_general' | translate }}</label>
						<input (ngModelChange)="new_change=true" value="{{ sensors.correction_time_general }}" type="text" id="time_general" class="form-control" name="time_general" [(ngModel)]="sensors['correction_time_general']" type>
						<div *ngIf="form.submitted && form.controls['time_general'].errors" class="text-danger">
							<div *ngIf="form.controls['time_general'].errors['required']">{{ 'sensors.time_general' | translate }} is required.</div>
						</div>
					</div>

				</div>
			</div>

			<div class="col-12 mt-5">
				<div class="row">
					<div class="col-6 mt-3">
						<button *ngIf="new_change==false || this.saved==true" type="button navb" class="btn btn-secondary text-light navb" (click)="clouse()" style="width: 100%">{{ 'sensors.cancel' | translate }}</button>
						<button *ngIf="new_change==true && this.saved==false" type="button navb" class="btn btn-secondary text-light navb" style="width: 100%" data-bs-toggle="modal" data-bs-target="#exampleModal1">{{ 'sensors.cancel' | translate }}</button>
					</div>
					<div class="col-6 mt-3">
						<button (click)="editSensor(form)" type="button navb submit" class="btn btn-info" style="width: 100%" [ngClass]="{'disabled': !new_change}">{{ 'sensors.save' | translate }}</button>
					</div>	
					<div class="col-12 mt-3">
						<button type="button" class="btn btn-danger navb me-3" data-bs-toggle="modal" style="width: 100%" data-bs-target="#exampleModal">{{ 'sensors.erase_sensor' | translate }}</button>
					</div>
				</div>
			</div>

		</form>
	</div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
			<div class="modal-header" style="border-bottom: 0px;">
				<h3 class="modal-title">{{ 'sensors.m1.1' | translate }}</h3>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body" >
				<p class="not">{{ 'sensors.m1.2' | translate }}</p>
			</div>
			<div class="modal-footer" style="border-top: 0px;">
				<div class="row">
					<div class="col-6">
						<button type="button" class="btn btn-secondary text-light" data-bs-dismiss="modal">{{ 'sensors.cancel' | translate }}</button>
					</div>
					<div class="col-6">
						<button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteSensor(sensors.id)" disabled *ngIf="edit_change || new_change">{{ 'sensors.delete' | translate }}</button>
						<button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteSensor(sensors.id)" *ngIf="!edit_change && !new_change">{{ 'sensors.delete' | translate }}</button>
                	</div>
            	</div>
          	</div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="border-bottom: 0px;">
            <h3 class="modal-title">{{ 'sensors.m2.1' | translate }}</h3>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" >
            <p class="not">{{ 'sensors.m2.2' | translate }}</p>
          </div>
          <div class="modal-footer" style="border-top: 0px;">
            <div class="row">
                <div class="col-5">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="clouseAll()">{{ 'sensors.exit' | translate }}</button>
                </div>
                <div class="col-7">
					<button type="button navb" data-bs-toggle="modal" data-bs-target="#exampleModal1" class="btn btn-info" style="width: 100%" (click)="update()" [ngClass]="{'disabled': !new_change}">{{ 'sensors.save' | translate }}</button>
                </div>
            </div>
          </div>
        </div>
      </div>
</div>

<div class="toast-cont">

	<div *ngIf="dup_ok" class="top-0 right-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
			<div class="toast-body">
				{{ 'sensors.e7' | translate }}
			</div>
			<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>

	<div *ngIf="dup_not" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body">
					{{ 'sensors.e8' | translate }}
				</div>
				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>

	<div *ngIf="alert_delete" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body">
				{{ 'sensors.e3' | translate }}
				</div>
				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>

	<div *ngIf="not_delete" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body">
				{{ 'sensors.e6' | translate }}
				</div>
				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>

	<div *ngIf="alert_new" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body">
				{{ 'sensors.e4' | translate }}
				</div>
				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>

	<div *ngIf="not_new" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body">
				{{ 'sensors.e5' | translate }}
				</div>
				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>

	<div *ngIf="save_ok" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
			<div class="toast-body">
				{{ 'sensors.e2' | translate }}
			</div>
			<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>
	
	<div *ngIf="save_not" class="top-0 end-0 p-3">
		<div role="alert" class="toast show align-items-center text-bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
			<div class="toast-body">
				{{ 'sensors.e1' | translate }}
			</div>
			<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>
</div>
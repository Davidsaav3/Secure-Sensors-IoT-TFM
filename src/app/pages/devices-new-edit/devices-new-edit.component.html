<app-navbar></app-navbar>
<form class="row cont0 needs-validation" #form="ngForm" >
    <div class="row p-0 m-0" [ngClass]="{'flex-column': this.width<965}">
        <div *ngIf="show_form" class="p-0" [ngClass]="{'c200': !this.show_map || this.width<965, 'c20': this.show_map || this.width>=965}"> 
            <div class="cont1 pb-0" [ngClass]="{'alt': this.width>=965}">
                <div class="row c1">
                    <div class="col-12">
                        <div class="row pb-3">
                            <div class="col-8 d-flex"> 
                                <h2 class="pe-3" *ngIf="state==0 && this.rute2[2]=='new'">{{ 'devices.edit.new_device' | translate }}</h2>
                                <!----><h2 class="pe-3" *ngIf="state==1 && this.rute2[2]=='new'">Duplicar {{ devices['uid'] }}</h2>
                                <!----><h2 class="pe-3" *ngIf="this.rute2[2]=='edit'">{{ 'device' | translate }} {{devices.uid}}</h2>
                            </div>
                            <div class="col-3 d-flex justify-content-end">
                                <div class="form-check form-switch">
                                    <label class="toggle tt1 t1">
                                        <input maxlength="4" type="checkbox" (ngModelChange)="changed=true" name="enable" [(ngModel)]="devices.enable">
                                        <span class="slider"></span>
                                        <ng-container *ngIf="this.activeLang=='es'">
                                            <span class="labels t1" data-on="Activado" data-off="Desactivado"></span>
                                        </ng-container>
                                        <ng-container *ngIf="this.activeLang=='en'">
                                            <span class="labels t1" data-on="Enable" data-off="Disable"></span>
                                        </ng-container>
                                    </label>
                                </div>
                            </div> 
                            <div  *ngIf="this.width>965" class="col-1" style="cursor: pointer; display: flex; justify-content: flex-end;">
                                <svg class="text-right" *ngIf="show_map" (click)="showMap()" xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-arrows-angle-show" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"></path>
                                </svg>
                                <svg class="text-right" *ngIf="!show_map" (click)="hideMap()" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrows-angle-hide" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M.172 15.828a.5.5 0 0 0 .707 0l4.096-4.096V14.5a.5.5 0 1 0 1 0v-3.975a.5.5 0 0 0-.5-.5H1.5a.5.5 0 0 0 0 1h2.768L.172 15.121a.5.5 0 0 0 0 .707zM15.828.172a.5.5 0 0 0-.707 0l-4.096 4.096V1.5a.5.5 0 1 0-1 0v3.975a.5.5 0 0 0 .5.5H14.5a.5.5 0 0 0 0-1h-2.768L15.828.879a.5.5 0 0 0 0-.707z"/>
                                </svg>
                            </div> 
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <input [value]="devices['createdAt']" type="text" id="createdAt" class="form-control d-none" name="createdAt" [(ngModel)]="devices['createdAt']" type>

                                <label for="uid">{{ 'devices.edit.uid' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['uid']" type="text" id="uid" class="form-control" name="uid" [(ngModel)]="devices['uid']" required type>
                                <div *ngIf="form.submitted && form.controls['uid'].errors" class="text-danger">
                                    <div *ngIf="form.controls['uid'].errors['required']">{{ 'devices.edit.uid' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label for="alias">{{ 'devices.edit.alias' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['alias']" type="text" id="alias" class="form-control" name="alias" [(ngModel)]="devices['alias']" type>
                                <div *ngIf="form.submitted && form.controls['alias'].errors" class="text-danger">
                                    <div *ngIf="form.controls['alias'].errors['required']">{{ 'devices.edit.alias' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="organizationid">{{ 'devices.edit.organization' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['organizationid']" type="text" id="organizationid" class="form-control" name="organizationid" [(ngModel)]="devices['organizationid']" type>
                                <div *ngIf="form.submitted && form.controls['organizationid'].errors" class="text-danger">
                                    <div *ngIf="form.controls['organizationid'].errors['required']">{{ 'devices.edit.organization' | translate }} is required.</div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <label for="typemeter">{{ 'devices.edit.typemeter' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['typemeter']" type="text" id="typemeter" class="form-control" name="typemeter" [(ngModel)]="devices['typemeter']" type>
                                <div *ngIf="form.submitted && form.controls['typemeter'].errors" class="text-danger">
                                    <div *ngIf="form.controls['typemeter'].errors['required']">{{ 'devices.edit.typemeter' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label for="application_id">{{ 'devices.edit.aplication' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['application_id']" type="text" id="application_id" class="form-control" name="application_id" [(ngModel)]="devices['application_id']" type>
                                <div *ngIf="form.submitted && form.controls['application_id'].errors" class="text-danger">
                                    <div *ngIf="form.controls['application_id'].errors['required']">{{ 'devices.edit.aplication' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label for="topic_name">{{ 'devices.edit.topic' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['topic_name']" type="text" id="topic_name" class="form-control" name="topic_name" [(ngModel)]="devices['topic_name']" required type>
                                <div *ngIf="form.submitted && form.controls['topic_name'].errors" class="text-danger">
                                    <div *ngIf="form.controls['topic_name'].errors['required']">{{ 'devices.edit.topic' | translate }} is required.</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <label for="origin">{{ 'devices.edit.origin' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['origin']" type="text" id="origin" class="form-control" name="origin" [(ngModel)]="devices['origin']" type>
                                <div *ngIf="form.submitted && form.controls['origin'].errors" class="text-danger">
                                    <div *ngIf="form.controls['origin'].errors['required']">{{ 'devices.edit.origin' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="description_origin">{{ 'devices.edit.description' | translate }}</label>
                                <input maxlength="45" (ngModelChange)="changed=true" [value]="devices['description_origin']" type="text" id="description_origin" class="form-control" name="description_origin" [(ngModel)]="devices['description_origin']" type>
                                <div *ngIf="form.submitted && form.controls['description_origin'].errors" class="text-danger">
                                    <div *ngIf="form.controls['description_origin'].errors['required']">{{ 'devices.edit.description' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label for="id_data_estructure">{{ 'estructure' | translate }}</label>
                                <select type="select" (ngModelChange)="changed=true" [value]="devices['id_data_estructure']" type="text" id="id_data_estructure" class="form-control" name="id_data_estructure" [(ngModel)]="devices['id_data_estructure']">
                                    <ng-container *ngFor="let id of estructures.estructure;let j=index">
                                        <option [selected]="id.id_estructure==devices['id_data_estructure']" value="{{id.id_estructure}}">{{id.description}}</option>
                                    </ng-container>
                                </select>
                                <div *ngIf="form.submitted && form.controls['id_data_estructure'].errors" class="text-danger">
                                    <div *ngIf="form.controls['id_data_estructure'].errors['required']">{{ 'estructure' | translate }} is required.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row c2">
                    <div class="col-12 "> 
                        <app-sensors-list></app-sensors-list>
                    </div> 
                </div>
            </div>
        </div>

        <div *ngIf="show_map" class="p-0" [ngClass]="{'c200': !this.show_form || this.width<965, 'c20': this.show_form || this.width>=965}">
            <div class="cont2 ms-lg-3 ms-0 ms-md-0" [ngClass]="{'alt': this.width>=965}" >
                
                <div *ngIf="this.rute2[2]=='edit'" class="c4 d-flex justify-content-between">
                    <div class="col-6" >
                        <h5 class="">{{devices.alias}}</h5>
                    </div>
                    <div *ngIf="this.width>965" class="col-3" style="cursor: pointer; cursor: pointer; display: flex; justify-content: flex-end;">
                        <svg class="text-right" *ngIf="show_form" (click)="hideForm()" xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-arrows-angle-show" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"></path>
                        </svg>
                        <svg class="text-right" *ngIf="!show_form" (click)="showForm()" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrows-angle-hide" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M.172 15.828a.5.5 0 0 0 .707 0l4.096-4.096V14.5a.5.5 0 1 0 1 0v-3.975a.5.5 0 0 0-.5-.5H1.5a.5.5 0 0 0 0 1h2.768L.172 15.121a.5.5 0 0 0 0 .707zM15.828.172a.5.5 0 0 0-.707 0l-4.096 4.096V1.5a.5.5 0 1 0-1 0v3.975a.5.5 0 0 0 .5.5H14.5a.5.5 0 0 0 0-1h-2.768L15.828.879a.5.5 0 0 0 0-.707z"/>
                        </svg>
                    </div>  
                </div>	
                <div *ngIf="this.rute2[2]=='new'" class="c4 d-flex justify-content-between">
                    <div class="col-9" > 
                        <h5 class="">{{devices.alias}}</h5>
                    </div>
                    <div *ngIf="this.width>965" class="col-3" style="cursor: pointer; cursor: pointer; display: flex; justify-content: flex-end;">
                        <svg class="text-right" *ngIf="show_form" (click)="hideForm()" xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-arrows-angle-expand" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"></path>
                        </svg>
                        <svg class="text-right" *ngIf="!show_form" (click)="showForm()" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrows-angle-contract" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M.172 15.828a.5.5 0 0 0 .707 0l4.096-4.096V14.5a.5.5 0 1 0 1 0v-3.975a.5.5 0 0 0-.5-.5H1.5a.5.5 0 0 0 0 1h2.768L.172 15.121a.5.5 0 0 0 0 .707zM15.828.172a.5.5 0 0 0-.707 0l-4.096 4.096V1.5a.5.5 0 1 0-1 0v3.975a.5.5 0 0 0 .5.5H14.5a.5.5 0 0 0 0-1h-2.768L15.828.879a.5.5 0 0 0 0-.707z"/>
                        </svg>
                    </div>  
                </div>	


                <div class="c5 p-0 m-0" style="width: 100%;">
                    <app-devices-map style="width: 100%;"></app-devices-map>
                </div>

                <div class="row c6">
                    <div *ngIf="(this.rute2[2]=='edit' || state==1) && (this.width>965)" class="col-1 pt-4" (click)="recharge()" style="cursor: pointer;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path>
                            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path>
                        </svg>
                    </div>
                    <div class="col-11 col-lg-6 col-md-11 col-11"> 
                        <div class="row">
                            <div class="col-md-4">
                                <label for="lat">{{ 'devices.edit.lat' | translate }}</label>
                                <input (ngModelChange)="updatesharedLat()" (ngModelChange)="changed=true" [value]="devices['lat']" type="text" id="lat" class="form-control" name="lat" [(ngModel)]="devices['lat']" type="number">
                                <div *ngIf="form.submitted && form.controls['lat'].errors" class="text-danger">
                                    <div *ngIf="form.controls['lat'].errors['required']">{{ 'devices.edit.lat' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label for="lon">{{ 'devices.edit.long' | translate }}</label>
                                <input (ngModelChange)="updatesharedLon()" [value]="devices['lon']" type="text" id="lon" class="form-control" name="lon" [(ngModel)]="devices['lon']" type="number">
                                <div *ngIf="form.submitted && form.controls['lon'].errors" class="text-danger">
                                    <div *ngIf="form.controls['lon'].errors['required']">{{ 'devices.edit.long' | translate }} is required.</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label for="cota">{{ 'devices.edit.alt' | translate }}</label>
                                <input [value]="devices['cota']" type="text" id="cota" class="form-control" name="cota" [(ngModel)]="devices['cota']" type="number">
                                <div *ngIf="form.submitted && form.controls['cota'].errors" class="text-danger">
                                    <div *ngIf="form.controls['cota'].errors['required']">{{ 'devices.edit.alt' | translate }} is required.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="(this.rute2[2]=='edit' || state==1) && (this.width<=965)" class="col-1 pt-4" (click)="recharge()" style="cursor: pointer;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path>
                            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path>
                        </svg>
                    </div>
                    <div style="position: relative;" class="col-11 col-lg-4 col-md-11 col-11"> 
                        <label for="timezone" class="form-label m-0">{{ 'devices.edit.zone' | translate }}</label>
                        <select class="form-select" aria-label="Default select example"(ngModelChange)="changed=true" [value]="devices['timezone']" type="text" id="timezone" class="form-control" name="timezone" [(ngModel)]="devices['timezone']" type>
                            <option value="Eniwetok, Kwajalein">Eniwetok, Kwajalein (GMT -12:00)</option>
                            <option value="Midway Island, Samoa">Midway Island, Samoa (GMT -11:00)</option>
                            <option value="Hawaii">Hawaii (GMT -10:00)</option>
                            <option value="Taiohae">Taiohae (GMT -9:30)</option>
                            <option value="Alaska">Alaska (GMT -9:00)</option>
                            <option value="Pacific Time (US & Canada)">Pacific Time (US & Canada) (GMT -8:00)</option>
                            <option value="Mountain Time (US & Canada)">Mountain Time (US & Canada) (GMT -7:00)</option>
                            <option value="Central Time (US & Canada), Mexico City">Central Time (US & Canada), Mexico City (GMT -6:00)</option>
                            <option value="Eastern Time (US & Canada), Bogota, Lima">Eastern Time (US & Canada), Bogota, Lima (GMT -5:00)</option>
                            <option value="Caracas">Caracas (GMT -4:30)</option>
                            <option value="Atlantic Time (Canada), Caracas, La Paz">Atlantic Time (Canada), Caracas, La Paz (GMT -4:00)</option>
                            <option value="Newfoundland">Newfoundland (GMT -3:30)</option>
                            <option value="Brazil, Buenos Aires, Georgetown">Brazil, Buenos Aires, Georgetown (GMT -3:00)</option>
                            <option value="Mid-Atlantic">Mid-Atlantic (GMT -2:00)</option>
                            <option value="Azores, Cape Verde Islands">Azores, Cape Verde Islands (GMT -1:00)</option>
                            <option value="Western Europe Time, London, Lisbon, Casablanca">Western Europe Time, London, Lisbon, Casablanca (GMT)</option>
                            <option value="Brussels, Copenhagen, Madrid, Paris" selected="selected">Brussels, Copenhagen, Madrid, Paris (GMT +1:00)</option>
                            <option value="Kaliningrad, South Africa">Kaliningrad,South Africa (GMT +2:00)</option>
                            <option value="Baghdad, Riyadh, Moscow, St. Petersburg">Baghdad, Riyadh,Moscow, St. Petersburg (GMT +3:00)</option>
                            <option value="Tehran">Tehran (GMT +3:30)</option>
                            <option value="Abu Dhabi, Muscat, Baku, Tbilisi">Abu Dhabi, Muscat, Baku, Tbilisi (GMT +4:00)</option>
                            <option value="Kabul">Kabul (GMT +4:30)</option>
                            <option value="Ekaterinburg, Islamabad, Karachi, Tashkent">Ekaterinburg, Islamabad, Karachi, Tashkent (GMT +5:00)</option>
                            <option value="Bombay, Calcutta, Madras, New Delhi">Bombay, Calcutta, Madras, New Delhi (GMT +5:30)</option>
                            <option value="Kathmandu, Pokhara">Kathmandu, Pokhara (GMT +5:45)</option>
                            <option value="Almaty, Dhaka, Colombo">Almaty, Dhaka, Colombo (GMT +6:00)</option>
                            <option value="Yangon, Mandala">Yangon, Mandalay (GMT +6:30)</option>
                            <option value="Bangkok, Hanoi, Jakarta">Bangkok, Hanoi, Jakarta (GMT +7:00)</option>
                            <option value="Beijing, Perth, Singapore, Hong Kong">Beijing, Perth, Singapore, Hong Kong (GMT +8:00)</option>
                            <option value="Eucla">Eucla (GMT +8:45)</option>
                            <option value="Tokyo, Seoul, Osaka, Sapporo, Yakutsk">Tokyo, Seoul, Osaka, Sapporo, Yakutsk (GMT +9:00)</option>
                            <option value="Adelaide, Darwin">Adelaide, Darwin (GMT +9:30)</option>
                            <option value="Eastern Australia, Guam, Vladivostok">Eastern Australia, Guam, Vladivostok (GMT +10:00)</option>
                            <option value="Lord Howe Island">Lord Howe Island (GMT +10:30)</option>
                            <option value="Magadan, Solomon Islands, New Caledonia">Magadan, Solomon Islands, New Caledonia (GMT +11:00)</option>
                            <option value="Norfolk Island">Norfolk Island (GMT +11:30)</option>
                            <option value="Auckland, Wellington, Fiji, Kamchatka">Auckland, Wellington, Fiji, Kamchatka (GMT +12:00)</option>
                            <option value="Chatham Islands">Chatham Islands (GMT +12:45)</option>
                            <option value="Apia, Nukualofa">Apia, Nukualofa (GMT +13:00)</option>
                            <option value="Line Islands, Tokelau">Line Islands, Tokelau (GMT +14:00)</option>
                        </select>
                        <svg style="position: absolute; top:35px; right:20px" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                        </svg>
                        <div *ngIf="form.submitted && form.controls['timezone'].errors" class="text-danger">
                            <div *ngIf="form.controls['timezone'].errors['required']">{{ 'devices.edit.zone' | translate }} is required.</div>
                        </div>
                    </div>
                    <div class="col-1 col-lg-1 col-md-1 col-1 pt-4" (mouseout)="view_can= false" (mouseover)="view_can= true" style="cursor: pointer; text-align: center; padding-top: 0.7em;" (click)="deleteMarker()">
                        <svg *ngIf="!view_can" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                            <path d="M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z"/>
                        </svg>
                        <svg *ngIf="view_can" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash2-fill" viewBox="0 0 16 16">
                            <path d="M2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225zm9.89-.69C10.966 2.214 9.578 2 8 2c-1.58 0-2.968.215-3.926.534-.477.16-.795.327-.975.466.18.14.498.307.975.466C5.032 3.786 6.42 4 8 4s2.967-.215 3.926-.534c.477-.16.795-.327.975-.466-.18-.14-.498-.307-.975-.466z"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row p-0 m-0">
        <div class="col-12 p-0">
            <div *ngIf="this.rute2[2]=='edit'" class="">
                <div class="">
                    <div class="row">
                        <div class="col-md-6 col-12">
                            <div class="row">
                                <div class="col-md-6 col-12 mt-1 pb-3">
                                    <button *ngIf="changed==false || this.saved==true" type="button navb" class="btn btn-secondary text-light navb" routerLink="/devices" style="width: 100%">{{ 'sensors.exit' | translate }}</button>
                                    <button *ngIf="changed==true && this.saved==false" type="button navb" class="btn btn-secondary text-light navb" style="width: 100%" data-bs-toggle="modal" data-bs-target="#exampleModal8">Restablecer datos</button>
                                </div>
                                <div class="col-md-6 col-12 mt-1 pb-3">
                                    <button ng-click="ocultar = true" type="button navb" class="btn btn-info navb me-3" style="width: 100%"  (click)="editDevices(form)" [ngClass]="{'disabled': !changed}">{{ 'sensors.save' | translate }}</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-12 d-flex" style="justify-content: flex-end;">
                            <div class="col-md-6 col-12 mt-1 pb-3">
                                <button type="button" class="btn btn-danger navb me-3" data-bs-toggle="modal" style="width: 100%" data-bs-target="#exampleModal9">{{ 'devices.edit.erase_disp' | translate }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="this.rute2[2]=='new'" class="row">
                <div class="col-md-6 col-12">
                    <div class="row">
                        <div class="col-md-6 col-12 mt-1 pb-3">
                            <button *ngIf="changed==false" type="button navb" class="btn btn-secondary text-light navb" routerLink="/devices" style="width: 100%">{{ 'sensors.cancel' | translate }}</button>
						    <button *ngIf="changed==true" type="button navb" class="btn btn-secondary text-light navb" style="width: 100%" data-bs-toggle="modal" data-bs-target="#exampleModal13">{{ 'sensors.cancel' | translate }}</button>
                        </div>
                        <div class="col-md-6 col-12 mt-1 pb-3">
                            <button type="button navb" class="btn btn-info navb me-3" style="width: 100%" (click)="newDevice(form)" [ngClass]="{'disabled': !changed}">{{ 'sensors.save' | translate }}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="toast-cont">
    <div *ngIf="act_ok" class="top-0 end-0 p-3">
        <div role="alert" class="toast show align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="d-flex">
            <div class="toast-body"> {{ 'devices.edit.e1' | translate }}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        </div>
    </div>
    <div *ngIf="act_not" class="top-0 end-0 p-3">
        <div role="alert" class="toast show align-items-center text-bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
            <div class="toast-body">{{ 'devices.edit.e2' | translate }}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="exampleModal8" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: 0px;">
                <h3 class="modal-title">Restablecer los datos?</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" >
                <p class="not">Esta acción es irréversible.</p>
            </div>
            <div class="modal-footer" style="border-top: 0px;">
                <div class="row">
                    <div class="col-7">
                        <button style="width: max-content;" type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="recharge()">Restablecer datos</button>
                    </div>
                    <div class="col-5">
                        <button type="button navb" data-bs-toggle="modal" data-bs-target="#exampleModal1" class="btn btn-info" style="width: 100%" [ngClass]="{'disabled': !changed}">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModal9" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: 0px;">
                <h3 class="modal-title">{{ 'devices.edit.m1.1' | translate }}</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" >
                <p class="not">{{ 'devices.edit.m1.2' | translate }}</p>
            </div>
            <div class="modal-footer" style="border-top: 0px;">
                <div class="row">
                    <div class="col-6">
                        <button type="button" class="btn btn-secondary text-light" data-bs-dismiss="modal">{{ 'sensors.cancel' | translate }}</button>
                    </div>
                    <div class="col-6">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteDevice(devices.id)" routerLink="/devices">{{ 'sensors.delete' | translate }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!---->

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="border-bottom: 0px;">
            <h3 class="modal-title">{{ 'devices.edit.m5.1' | translate }}</h3>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" >
            <p class="not">{{ 'devices.edit.m5.1' | translate }}</p>
          </div>
          <div class="modal-footer" style="border-top: 0px;">
            <div class="row">
                <div class="col-6">
                    <button type="button" class="btn btn-secondary text-light" data-bs-dismiss="modal">{{ 'sensors.cancel' | translate }}</button>
                </div>
                <div class="col-6">
                    <button type="button" class="btn btn-danger">{{ 'sensors.delete' | translate }}</button>
                </div>
            </div>
          </div>
        </div>
      </div>
</div>

<div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="border-bottom: 0px;">
            <h3 class="modal-title">{{ 'devices.edit.m3.1' | translate }}</h3>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" >
            <p class="not">{{ 'devices.edit.m3.2' | translate }}</p>
          </div>
          <div class="modal-footer" style="border-top: 0px;">
            <div class="row">
                <div class="col-6">
                    <button type="button" class="btn btn-secondary text-light" data-bs-dismiss="modal">{{ 'sensors.cancel' | translate }}</button>
                </div>
                <div class="col-6">
                    <button type="button" class="btn btn-info">{{ 'sensors.acept' | translate }}</button>
                </div>
            </div>
          </div>
        </div>
      </div>
</div>

<div class="modal fade" id="exampleModal13" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: 0px;">
                <h3 class="modal-title">{{ 'devices.edit.m2.1' | translate }}</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" >
                <p class="not">{{ 'devices.edit.m2.2' | translate }}</p>
            </div>
            <div class="modal-footer" style="border-top: 0px;">
                <div class="row">
                    <div class="col-5">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"  routerLink="/devices">{{ 'sensors.exit' | translate }}</button>
                    </div>
                    <div class="col-7">
                        <button type="button navb" data-bs-toggle="modal" data-bs-target="#exampleModal1" class="btn btn-info" style="width: 100%" (click)="newDevice(form)" [ngClass]="{'disabled': !changed}">{{ 'sensors.save' | translate }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

